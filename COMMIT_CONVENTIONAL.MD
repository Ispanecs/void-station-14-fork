# Соглашение о коммитах

Данное соглашение - простое соглашение о том, как нужно писать сообщения коммитов. Оно описывает простой набор правил
для создания понятной истории коммитов, а также позволяет проще разрабатывать инструменты автоматизации, основанные на
истории коммитов.
Данное соглашение основано на [оригинальном Соглашении о коммитах](https://www.conventionalcommits.org/ru/v1.0.0/)
и совместимо с [Семантическим Версионированием](https://semver.org/lang/ru/spec/v2.0.0.html), описывая новые функции,
исправления и изменения, нарушающие обратную совместимость в сообщениях коммитов.

Сообщения коммитов должны быть следующей структуры:

```
тип(контекст): описание

дополнительное описание

сноски
```

- "тип" ОБЯЗАТЕЛЬНО указывать.
- "контекст" указывать необязательно; можно перечислять несколько контекстов через запятую.
- "описание" ОБЯЗАТЕЛЬНО указывать.
- "дополнительное описание" указывать необязательно.
- "сноски" указывать необязательно.

## Типы коммитов

- **add**: добавление нового функционала.
- **fix**: исправление бага/ошибки в коде или других элементах.
- **hotfix**: срочное исправление бага/ошибки в коде или других элементах. Применяется только в основной(master) ветке.
- **tweak**: изменение существующего функционала.
- **remove**: удаление существующего функционала или других элементов.
- **refactor**: изменения в коде, которые не исправляют ошибки и не добавляют новый функционал.
- **style**: изменения, не влияющие на функционал кода (отступы, форматирование и т.п.).
- **docs**: изменения касающиеся документации.
- **revert**: откат изменений другого коммита. Должен содержать тот же контекст и описание, что и у отменяемого коммита.
- **wip**: незавершенные изменения в коде.

## Контексты

- **git** - изменения не влияющие на код, но затрагивающий другие элементы репозитория.
- **tools** - изменения затрагивающие вспомогательные инструменты проекта.
- **lang** - изменения касающиеся локализации.
- **race** - изменения касающиеся игровых рас.
- **role** - изменения затрагивающие роли.
- **map** - изменение затрагивающие карты игры.
- **texture** - изменение затрагивающие текстуры игры.
- **ui** - изменение затрагивающие интерфейс игры.

## Work In Progress (WIP)

Если необходимо сохранить незавершённые изменения кода, **нужно** использовать тип коммита `wip`.

Такие коммиты **запрещено** вносить в основные ветки проекта (**master**, **develop**).

Такие коммиты разрешены только с тем условием, что в будущем будут **обязательно** удалены через
`git rebase --interactive` или любым другим способом из репозитория.

## Примеры

### Сообщение коммита без тела

```
docs: correct spelling of CHANGELOG
```

### Сообщение коммита с контекстом

```
feat(lang): add polish language
```

### Сообщение коммита с телом из нескольких абзацев и несколькими сносками

```
fix: prevent racing of requests

Introduce a request id and a reference to latest request. Dismiss
incoming responses other than from latest request.

Remove timeouts which were used to mitigate the racing issue but are
obsolete now.

Reviewed-by: Z
Refs: #123
```

### Сообщение коммита об откате измененний другого коммита

```
revert: let us never again speak of the noodle incident

Refs: 676104e, a215868
```
